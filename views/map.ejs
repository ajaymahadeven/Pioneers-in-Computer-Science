<%- include('partials/headers/map_header'); -%>
<div class="content-container">
  <h1>Birth Places of Pioneers</h1>
</div>
<div class="map-container">
  <div class="icon-container">
    <div class="inner-icon-container">
      <p>_</p>
    </div>
    <div class="inner-icon-container">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        fill="currentColor"
        class="bi bi-app"
        viewBox="0 0 16 16"
      >
        <path
          d="M11 2a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3h6zM5 1a4 4 0 0 0-4 4v6a4 4 0 0 0 4 4h6a4 4 0 0 0 4-4V5a4 4 0 0 0-4-4H5z"
        />
      </svg>
    </div>
    <div class="inner-icon-container">
      <p>X</p>
    </div>
  </div>
  <div class="map" id="map">
    <script>
          var map = L.map('map').setView([0, 0], 1);
      var markers = L.markerClusterGroup(); //create a new marker cluster group


      L.tileLayer('https://maptiles.p.rapidapi.com/en/map/v1/{z}/{x}/{y}.png?rapidapi-key=f420ee1c73msh1dc16433996c2ecp1729f8jsndbe334e09787', {
        attribution: 'Tiles &copy: <a href="https://www.maptilesapi.com/">MapTiles API</a>, Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        maxZoom: 19,
        minZoom: 3,
      }).addTo(map);

      <% pioneers.forEach(function(pioneer) { %>
        var marker = L.marker([<%= pioneer.latitude %>, <%= pioneer.longitude %>]);
        marker.bindPopup("<b><%= pioneer.name %></b>");
         // Redirect to /pioneer/<%= pioneer.name %> when the popup is clicked

        markers.addLayer(marker); //add the marker to the cluster group
      <% }); %>


      map.addLayer(markers); //add the cluster group to the map
    </script>
  </div>
</div>
<%- include('partials/footers/footer'); -%>
